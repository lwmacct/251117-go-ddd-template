# 用户列表导出功能

> **状态**: ✅ 已完成
> **优先级**: 低
> **完成日期**: 2024-11-30

<!--TOC-->

## Table of Contents

- [需求背景](#需求背景) `:23+4`
- [已实现功能](#已实现功能) `:27+22`
  - [导出特性](#导出特性) `:29+7`
  - [导出字段](#导出字段) `:36+13`
- [技术实现](#技术实现) `:49+23`
  - [复用组件](#复用组件) `:51+5`
  - [代码位置](#代码位置) `:56+9`
  - [使用方式](#使用方式) `:65+7`
- [注意事项](#注意事项) `:72+5`

<!--TOC-->

## 需求背景

管理员需要导出用户列表，用于数据备份、报表生成或外部系统同步。

## 已实现功能

### 导出特性

- 一键导出用户列表为 CSV 文件
- 支持当前搜索条件过滤后导出
- UTF-8 编码，支持中文字符（含 BOM）
- 自动生成带日期戳的文件名

### 导出字段

| 字段     | 说明           |
| -------- | -------------- |
| ID       | 用户 ID        |
| 用户名   | 登录用户名     |
| 邮箱     | 用户邮箱       |
| 姓名     | 用户全名       |
| 状态     | 启用/禁用/封禁 |
| 角色     | 分配的角色列表 |
| 创建时间 | 账户创建时间   |
| 更新时间 | 最后更新时间   |

## 技术实现

### 复用组件

- 使用 `@/utils/export.ts` 的 `exportToCSV` 工具函数
- 复用审计日志导出相同的技术方案

### 代码位置

```
web/src/pages/admin/users/
├── index.vue                           # 添加导出按钮
└── composables/
    └── useAdminUsers.ts                # 添加 exportUsers 方法
```

### 使用方式

1. 进入用户管理页面 `/admin/users`
2. 可选：输入搜索条件筛选用户
3. 点击"导出"按钮
4. 浏览器自动下载 CSV 文件

## 注意事项

1. **数据量限制**: 单次最多导出 1000 条记录
2. **隐私保护**: 不导出密码、敏感信息
3. **角色转换**: 角色 ID 自动转换为显示名称
